<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>demo</title>
    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/vue.js"></script>
    <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script th:inline="javascript">
        $(function () {
            //为页码添加点击事件
            $("#list li").click(function (e) {
                demoVue.now_page_number = parseInt($(this).text()) || $(this).text();
                $.ajax({
                    url: 'get_demo_list',
                    data: {
                        page_number: $(this).text()
                    },
                    success: function (res) {
                        demoVue.$data.stu = res;
                    }
                })
            })
        })
    </script>
</head>
<body>
<div class="container-fluid" id="demo">
    <div class="row">
        <div class="col-md-6 col-md-push-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        测试demo
                    </h4>
                </div>
                <div class="panel-body">
                    <table class="table table-striped table-hover" role="table">
                        <!--                        展示一个人的方法-->
                        <thead>
                        <tr>
                            <th>学号</th>
                            <th>姓名</th>
                            <th>性别</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in stu">
                            <td>{{item.stu_no}}</td>
                            <td>{{item.name}}</td>
                            <td>{{item.sex}}</td>
                            <td>
                                <button class="btn btn-default">
                                    测试
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="center-block" id="list">
                        <ul class="pagination">
                            <li><a>&laquo;</a></li>
                            <li><a v-if="now_page_number - 2 > 0">{{now_page_number-2}}</a></li>
                            <li><a v-if="now_page_number - 1 > 0">{{now_page_number-1}}</a></li>
                            <li class="active"><a>{{now_page_number}}</a></li>
                            <li><a v-if="now_page_number + 1 <= max_page_number">{{now_page_number+1}}</a></li>
                            <li><a v-if="now_page_number + 2 <= max_page_number">{{now_page_number+2}}</a></li>
                            <li><a>&raquo;</a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-footer">

                </div>
            </div>
        </div>
    </div>
</div>
<script th:inline="javascript">
    // vue代码部分
    // el表示作用域哪个元素内，#表示通过id查找，.表示类查找
    // data表示放在这个元素内的数据，这和小程序类似
    // 还有别的许多方法，这里用不上
    class DemoEntity {
        constructor() {

        }
    }

    const demoVue = new Vue({
        el: "#demo",
        data: {
            stu: [[${peoples}]],//获取后台model传来的值
            isList: false,
            now_page_number: 1,
            max_page_number: 10
        },
        created: function () {
            $.ajax({
                url: 'get_demo_list',
                data: {
                    page_number: 1
                },
                success: function (res) {
                    //成功之后将demoVue对象里的$data里的stu值改变
                    //然后vue自动去渲染网页
                    demoVue.$data.stu = res;
                }
            });
            $.ajax({
                url:'get_demo_page_number',
                success:function (res) {
                    demoVue.$data.max_page_number = res;
                }
            })
        },
        methods: {}
    });

</script>
</body>
</html>